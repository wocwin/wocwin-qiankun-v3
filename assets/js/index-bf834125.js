import{u as e}from"./useApi-bdbde33e.js";import{d as a,q as t,t as l,f as n,Y as o,o as i,J as u,K as s,e as r,a as p,O as m}from"./@vue_runtime-core@3.2.47-371f6b9e.js";import{r as c,j as d,v as b,u as f,a as h}from"./@vue_reactivity@3.2.47-c13b9e33.js";import{O as v}from"./@vue_shared@3.2.47-5fd227e6.js";const N=a({...a({name:"accountManage"}),setup(a){const{proxy:N}=e(),g=()=>{},k=()=>{},y=c(""),C=c(),x=d({deptOptions:[],
// 左侧tree
queryData:{userName:null,
// 登录名
nickName:null,
// 用户状态
workshopNum:null,phonenumber:null,date1:null,date:null},listTypeInfo:{multipleList:[{name:"前纺一车间",id:"W1"},{name:"前纺二车间",id:"W2"},{name:"前纺三车间",id:"W3"},{name:"前纺四车间",id:"W4"}]},table:{currentPage:1,pageSize:10,total:0,firstColumn:{type:"index"},
// 接口返回数据
data:[],
// 表头数据
columns:[{prop:"userName",label:"登录名",minWidth:"120"},{prop:"nickName",label:"插槽使用",minWidth:"120",slotName:"nickName"},{prop:"deptName",label:"部门",minWidth:"120"},{prop:"roleName",label:"角色",minWidth:"120"},{prop:"descript",label:"描述",minWidth:"180"},{prop:"createTime",label:"创建时间",minWidth:"180"}],operator:[{text:"查看",fun:e=>{}},{text:"编辑",fun:e=>{}},{text:"重置密码",fun:e=>{}},{text:"删除",fun:e=>{}}],
// 操作列样式
operatorConfig:{fixed:"right",
// 固定列表右边（left则固定在左边）
width:"240",label:"操作"}}});t((()=>y.value),(e=>{C.value.filter(e)}));const W=l((()=>({userName:{label:"登录名称",comp:"el-input"},nickName:{label:"姓名",comp:"el-input"},phonenumber:{label:"手机号码",comp:"el-input"},date1:{label:"日期组件使用",comp:"t-date-picker",bind:{isPickerOptions:!0}},workshopNum:{label:"t-select使用",placeholder:"请多选",span:2,comp:"t-select",isSelfCom:!0,bind:{valueCustom:"id",labelCustom:"name",multiple:!0,optionSource:x.listTypeInfo.multipleList}},date:{label:"创建时间",comp:"t-date-picker",span:2,bind:{type:"daterange"}}}))),w=l((()=>{const{userName:e,nickName:a,date:t,date1:l,workshopNum:n,phonenumber:o}=b(x.queryData);return{userName:e.value,nickName:a.value,workshopNum:n.value,phonenumber:o.value,date1:l.value,beginDate:t.value&&t.value[0]?t.value[0]:null,endDate:t.value&&t.value[1]?t.value[1]:null,pageNum:x.table.currentPage,pageSize:x.table.pageSize}})),S=e=>{x.queryData=e,_()};n((()=>{_(),O()}));const _=async()=>{const e=await N.$api.userList(w.value);e.success&&(x.table.data=null==e?void 0:e.data.rows,x.table.total=e.data.total)},O=async()=>{const e=await N.$api.treeselect();e.success&&(x.deptOptions=e.data,x.deptOptions.length)},z=(e,a)=>!e||a.label.includes(e),P=e=>{},j=e=>{x.table.pageSize=e,_()},D=e=>{x.table.currentPage=e,_()};return(e,a)=>{const t=o("el-input"),l=o("el-tree"),n=o("el-button"),c=o("t-adaptive-page");return i(),u(c,{class:"account_mange",isCopy:"",table:f(x).table,columns:f(x).table.columns,opts:f(W),isPaginationCumulative:"",onSizeChange:j,onPageChange:D,onSubmit:S,title:"用户管理列表"},{leftContent:s((()=>[r(t,{modelValue:f(y),"onUpdate:modelValue":a[0]||(a[0]=e=>h(y)?y.value=e:null),placeholder:"请输入部门名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},null,8,["modelValue"]),r(l,{ref_key:"treeRef",ref:C,class:"filter-tree",data:f(x).deptOptions,props:{children:"children",label:"label"},"default-expand-all":"","filter-node-method":z,onNodeClick:P},null,8,["data"])])),nickName:s((({scope:e})=>[p("div",null,v(e.row.nickName),1)])),toolbar:s((()=>[r(n,{type:"primary",onClick:g},{default:s((()=>[m("新增")])),_:1}),r(n,{type:"danger",onClick:k},{default:s((()=>[m("批量删除")])),_:1})])),_:1},8,["table","columns","opts"])}}});export{N as default};
