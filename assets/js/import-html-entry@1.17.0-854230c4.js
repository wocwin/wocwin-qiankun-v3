import{_ as t,a as e,b as n,d as r,e as c}from"./@babel_runtime@7.24.7-2c958d86.js";function i(t,e){return Promise.all(t.map((function(t,n){return t.then((function(t){return{status:"fulfilled",value:t}})).catch((function(t){if(null!=e&&e(n))throw t;return{status:"rejected",reason:t}}))})))}var o,a,s,u="undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Trident");function f(t,e){if(!t.hasOwnProperty(e)||!isNaN(e)&&e<t.length)return!0;if(!u)return!1;try{return t[e]&&"undefined"!=typeof window&&t[e].parent===window}catch(n){return!0}}function l(t){var e=t.indexOf(">")+1,n=t.lastIndexOf("<");return t.substring(e,n)}function p(e){if("object"===t(e))return"/";try{var n=new URL(e,location.href),r=n.origin,c=n.pathname.split("/");return c.pop(),"".concat(r).concat(c.join("/"),"/")}catch(i){return""}}var h=window.requestIdleCallback||function(t){var e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)};var d={};function v(t){var e=new DOMParser,n='<script src="'.concat(t,'"><\/script>');return e.parseFromString(n,"text/html").scripts[0].src}var m=/(<script[\s\S]*?>)[\s\S]*?<\/script>/gi,w=/<(script)\s+((?!type=('|")text\/ng\x2Dtemplate\3)[\s\S])*?>[\s\S]*?<\/\1>/i,y=/.*\ssrc=('|")?([^>'"\s]+)/,g=/.*\stype=('|")?([^>'"\s]+)/,b=/.*\sentry\s*.*/,x=/.*\sasync\s*.*/,P=/.*\scrossorigin=('|")?use-credentials\1/,S=/.*\snomodule\s*.*/,O=/.*\stype=('|")?module('|")?\s*.*/,j=/<(link)\s+[\s\S]*?>/gi,E=/\srel=('|")?(preload|prefetch)\1/,T=/.*\shref=('|")?([^>'"\s]+)/,k=/.*\sas=('|")?font\1.*/,D=/<style[^>]*>[\s\S]*?<\/style>/gi,G=/\s+rel=('|")?stylesheet\1.*/,R=/.*\shref=('|")?([^>'"\s]+)/,A=/<!--([\s\S]*?)-->/g,U=/<link(\s+|\s+[\s\S]+\s+)ignore(\s*|\s+[\s\S]*|=[\s\S]*)>/i,W=/<style(\s+|\s+[\s\S]+\s+)ignore(\s*|\s+[\s\S]*|=[\s\S]*)>/i,C=/<script(\s+|\s+[\s\S]+\s+)ignore(\s*|\s+[\s\S]*|=[\s\S]*)>/i;function F(t){return t.startsWith("http://")||t.startsWith("https://")}function L(t,e){return new URL(t,e).toString()}var M=function(t){return"\x3c!-- ".concat(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"prefetch/preload":""," link ").concat(t," replaced by import-html-entry --\x3e")},V=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"\x3c!-- ".concat(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"cors":""," ").concat(e?"async":""," script ").concat(t," replaced by import-html-entry --\x3e")},_="\x3c!-- inline scripts replaced by import-html-entry --\x3e",I=function(t){return"\x3c!-- ignore asset ".concat(t||"file"," replaced by import-html-entry --\x3e")},N=function(t,e){return"\x3c!-- ".concat(e?"nomodule":"module"," script ").concat(t," ignored by import-html-entry --\x3e")};function q(t,n,r){var c=[],i=[],o=null,a="noModule"in document.createElement("script"),s={template:t.replace(A,"").replace(j,(function(t){if(!!t.match(G)){var r=t.match(R),c=t.match(U);if(r){var o=r&&r[2],a=o;return o&&!F(o)&&(a=L(o,n)),c?I(a):(a=v(a),i.push(a),M(a))}}if(t.match(E)&&t.match(T)&&!t.match(k)){var s=t.match(T),u=e(s,3)[2];return M(u,!0)}return t})).replace(D,(function(t){return W.test(t)?I("style file"):t})).replace(m,(function(t,e){var r,i=e.match(C),s=a&&!!e.match(S)||!a&&!!e.match(O),u=e.match(g),f=u&&u[2];if((r=f)&&-1===["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"].indexOf(r))return t;if(w.test(t)&&e.match(y)){var p=e.match(b),h=e.match(y),d=h&&h[2];if(o&&p)throw new SyntaxError("You should not set multiply entry script!");if(d&&(F(d)||(d=L(d,n)),d=v(d)),o=o||p&&d,i)return I(d||"js file");if(s)return N(d||"js file",a);if(d){var m=!!e.match(x),j=!!e.match(P);return c.push(m||j?{async:m,src:d,crossOrigin:j}:d),V(d,m,j)}return t}return i?I("js file"):s?N("js file",a):(l(t).split(/[\r\n]+/).every((function(t){return!t.trim()||t.trim().startsWith("//")}))||c.push(t),_)})),scripts:c=c.filter((function(t){return!!t})),styles:i,
// set the last script as entry if have not set
entry:o||c[c.length-1]};return"function"==typeof r&&(s=r(s)),s}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var z={},B={},J={};if(!window.fetch)throw new Error('[import-html-entry] Here is no "fetch" on the window env, you need to polyfill it');var K=window.fetch.bind(window);function Q(t){return t}function X(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fetch,r=t;return $(e,void 0===n?K:n).then((function(t){return r=t.reduce((function(t,e){var n=e.src,r=e.value;return t=t.replace(M(n),Z(n)?"".concat(n):"<style>/* ".concat(n," */").concat(r,"</style>"))}),r)}))}var Z=function(t){return t.startsWith("<")};function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K;return i(t.map(function(){var t=r(c.mark((function t(n){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Z(n)){t.next=4;break}return t.abrupt("return",l(n));case 4:return t.abrupt("return",z[n]||(z[n]=e(n).then((function(t){if(t.status>=400)throw new Error("".concat(n," load failed with status ").concat(t.status));return t.text()})).catch((function(t){try{-1===t.message.indexOf(n)&&(t.message="".concat(n," ").concat(t.message))}catch(e){}throw t}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(e){return e.map((function(e,n){return"fulfilled"===e.status&&(e.value={src:t[n],value:e.value}),e})).filter((function(t){return"rejected"===t.status&&Promise.reject(t.reason),"fulfilled"===t.status})).map((function(t){return t.value}))}))}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,n=arguments.length>2?arguments[2]:void 0,o=function(t,n){return B[t]||(B[t]=e(t,n).then((function(e){if(e.status>=400)throw new Error("".concat(t," load failed with status ").concat(e.status));return e.text()})).catch((function(e){try{-1===e.message.indexOf(t)&&(e.message="".concat(t," ").concat(e.message))}catch(n){}throw e})))};return i(t.map(function(){var t=r(c.mark((function t(e){var n,r,i,a;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=8;break}if(!Z(e)){t.next=5;break}return t.abrupt("return",l(e));case 5:return t.abrupt("return",o(e));case 6:t.next=13;break;case 8:if(n=e.src,r=e.async,i=e.crossOrigin,a=i?{credentials:"include"}:{},!r){t.next=12;break}return t.abrupt("return",{src:n,async:!0,content:new Promise((function(t,e){return h((function(){return o(n,a).then(t,e)}))}))});case 12:return t.abrupt("return",o(n,a));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(function(e){return t[e]===n})).then((function(e){return e.map((function(e,n){return"fulfilled"===e.status&&(e.value={src:t[n],value:e.value}),e})).filter((function(t){return"rejected"===t.status&&Promise.reject(t.reason),"fulfilled"===t.status})).map((function(t){return t.value}))}))}function et(t,e){setTimeout((function(){throw t}))}function nt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=r.fetch,i=void 0===c?K:c,u=r.strictGlobal,l=void 0!==u&&u,p=r.success,h=r.error,v=void 0===h?function(){}:h,m=r.beforeExec,w=void 0===m?function(){}:m,y=r.afterExec,g=void 0===y?function(){}:y,b=r.scopedGlobalVariables,x=void 0===b?[]:b;return tt(e,i,t).then((function(e){var r=function(t,e){var r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.proxy,c=n.strictGlobal,i=n.scopedGlobalVariables,o=void 0===i?[]:i,a=Z(t)?"":"//# sourceURL=".concat(t,"\n"),s=o.length?"const {".concat(o.join(","),"}=this;"):"";return(0,eval)("window").proxy=r,c?s?";(function(){with(this){".concat(s).concat(e,"\n").concat(a,"}}).bind(window.proxy)();"):";(function(window, self, globalThis){with(window){;".concat(e,"\n").concat(a,"}}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);"):";(function(window, self, globalThis){;".concat(e,"\n").concat(a,"}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);")}(t,w(e,t)||e,{proxy:n,strictGlobal:l,scopedGlobalVariables:x});!function(t,e){var n=t;if(!d[n]){var r="(function(){".concat(e,"})");d[n]=(0,eval)(r)}d[n].call(window)}(t,r),g(e,t)};function c(e,c,i){if(e===t){!function(t){for(var e in o=a=void 0,t)f(t,e)||(o?a||(a=e):o=e,s=e)}(l?n:window);try{r(e,c),i(n[function(t){var e,n=0,r=!1;for(var c in t)if(!f(t,c)){for(var i=0;i<window.frames.length&&!r;i++)if(window.frames[i]===t[c]){r=!0;break}if(!r&&(0===n&&c!==o||1===n&&c!==a))return c;n++,e=c}if(e!==s)return e}(l?n:window)]||{})}catch(u){throw u}}else if("string"==typeof c)try{null!=e&&e.src?r(e.src,c):r(e,c)}catch(u){et(u,"[import-html-entry]: error occurs while executing normal script ".concat(e))}else c.async&&(null==c||c.content.then((function(t){return r(c.src,t)})).catch((function(t){et(t,"[import-html-entry]: error occurs while executing async script ".concat(c.src))})))}function i(n,r){if(n<e.length){var o=e[n];c(o.src,o.value,r),t||n!==e.length-1?i(n+1,r):r()}}return new Promise((function(t){return i(0,p||t)}))})).catch((function(t){throw v(),t}))}function rt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=K,c=!1,i=p,o=Q,a=n.postProcessTemplate;return"function"==typeof n?r=n:(n.fetch&&("function"==typeof n.fetch?r=n.fetch:(r=n.fetch.fn||K,c=!!n.fetch.autoDecodeResponse)),i=n.getPublicPath||n.getDomain||p,o=n.getTemplate||Q),J[t]||(J[t]=r(t).then((function(t){return function(t,n){if(!n)return t.text();if(!t.headers)return t.text();var r=t.headers.get("Content-Type");if(!r)return t.text();var c="utf-8",i=r.split(";");if(2===i.length){var o=i[1].split("="),a=e(o,2)[1],s=a&&a.trim();s&&(c=s)}return"UTF-8"===c.toUpperCase()?t.text():t.blob().then((function(t){return new Promise((function(e,n){var r=new window.FileReader;r.onload=function(){e(r.result)},r.onerror=n,r.readAsText(t,c)}))}))}(t,c)})).then((function(e){var n=i(t),c=q(o(e),n,a),s=c.template,u=c.scripts,f=c.entry,l=c.styles;return X(s,l,{fetch:r}).then((function(t){return{template:t,assetPublicPath:n,getExternalScripts:function(){return tt(u,r)},getExternalStyleSheets:function(){return $(l,r)},execScripts:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.length?nt(f,u,t,Y({fetch:r,strictGlobal:e},n)):Promise.resolve()}}}))})))}function ct(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.fetch,c=void 0===r?K:r,i=n.getTemplate,o=void 0===i?Q:i,a=n.postProcessTemplate,s=n.getPublicPath||n.getDomain||p;if(!t)throw new SyntaxError("entry should not be empty!");if("string"==typeof t)return rt(t,{fetch:c,getPublicPath:s,getTemplate:o,postProcessTemplate:a});if(Array.isArray(t.scripts)||Array.isArray(t.styles)){var u=t.scripts,f=void 0===u?[]:u,l=t.styles,h=void 0===l?[]:l,d=t.html;return X(o(function(t){return f.reduce((function(t,e){return"".concat(t).concat(V(e))}),t)}((e=void 0===d?"":d,h.reduceRight((function(t,e){return"".concat(M(e)).concat(t)}),e)))),h,{fetch:c}).then((function(e){return{template:e,assetPublicPath:s(t),getExternalScripts:function(){return tt(f,c)},getExternalStyleSheets:function(){return $(h,c)},execScripts:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.length?nt(f[f.length-1],f,t,Y({fetch:c,strictGlobal:e},n)):Promise.resolve()}}}))}throw new SyntaxError("entry scripts or styles should be array!")}export{nt as _,ct as i};
