import{d as e,e as t,f as n,h as r,i as o,j as a,k as i,b as c,_ as s,l as u,a as l,m as p,n as d}from"./@babel_runtime@7.24.7-2c958d86.js";import{_ as f,a as m,b as v,c as h,d as y,e as g,f as S,g as E,h as b,i as w}from"./lodash@4.17.21-83769d0e.js";import{T as M,O as T,l as P,b as C,B as x}from"./single-spa@5.9.5-2b0cf9df.js";import{_ as L,i as O}from"./import-html-entry@1.17.0-854230c4.js";var R=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;function _(n,r){return f({},function(n){return{beforeLoad:function(){return e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.__POWERED_BY_QIANKUN__=!0;case 1:case"end":return e.stop()}}),e)})))()},beforeMount:function(){return e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.__POWERED_BY_QIANKUN__=!0;case 1:case"end":return e.stop()}}),e)})))()},beforeUnmount:function(){return e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete n.__POWERED_BY_QIANKUN__;case 1:case"end":return e.stop()}}),e)})))()}}}(n),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",o=!1;return{beforeLoad:function(){return e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=r;case 1:case"end":return e.stop()}}),e)})))()},beforeMount:function(){return e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(n.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=r);case 1:case"end":return e.stop()}}),e)})))()},beforeUnmount:function(){return e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===R?delete n.__INJECTED_PUBLIC_PATH_BY_QIANKUN__:n.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=R,o=!0;case 2:case"end":return e.stop()}}),e)})))()}}}(n,r),(function(e,t){return m(null!=e?e:[],null!=t?t:[])}))}var G,A,k=function(e){n(i,e);var t=r(i);function i(e){return a(this,i),t.call(this,"[qiankun]: ".concat(e))}return o(i)}(i(Error)),D={},H={};function I(e,t){return{
/**
     * onGlobalStateChange 全局依赖监听
     *
     * 收集 setState 时所需要触发的依赖
     *
     * 限制条件：每个子应用只有一个激活状态的全局监听，新监听覆盖旧监听，若只是监听部分属性，请使用 onGlobalStateChange
     *
     * 这么设计是为了减少全局监听滥用导致的内存爆炸
     *
     * 依赖数据结构为：
     * {
     *   {id}: callback
     * }
     *
     * @param callback
     * @param fireImmediately
     */
onGlobalStateChange:function(t,n){if(t instanceof Function&&(H[e],H[e]=t,n)){var r=v(D);t(r,r)}},
/**
     * setGlobalState 更新 store 数据
     *
     * 1. 对输入 state 的第一层属性做校验，只有初始化时声明过的第一层（bucket）属性才会被更改
     * 2. 修改 store 并触发全局监听
     *
     * @param state
     */
setGlobalState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e===D)return!1;var n=[],r=v(D);return D=v(Object.keys(e).reduce((function(r,o){return t||r.hasOwnProperty(o)?(n.push(o),Object.assign(r,c({},o,e[o]))):r}),D)),0!==n.length&&(function(e,t){Object.keys(H).forEach((function(n){H[n]instanceof Function&&H[n](v(e),v(t))}))}(D,r),!0)},
// 注销该应用下的依赖
offGlobalStateChange:function(){return delete H[e],!0}}}(A=G||(G={})).Proxy="Proxy",A.Snapshot="Snapshot",A.LegacyProxy="LegacyProxy";var V="2.10.16";function N(e){return Array.isArray(e)?e:[e]}var B="function"==typeof window.__zone_symbol__setTimeout?window.__zone_symbol__setTimeout:function(e){return Promise.resolve().then(e)},F=!1;var W=new WeakMap;var j=new WeakMap;function U(e){if(j.has(e))return!0;var t="function"==typeof e&&e instanceof Function;return t&&j.set(e,t),t}var q=new WeakMap;var K=new WeakMap;function Y(e){if(K.has(e))return K.get(e);var t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return K.set(e,t),t}var Q=h((function(){try{return new Function("const { a } = { a: 1 }")(),!0}catch(e){return!1}})),X="qiankun-head";function z(e,t){return function(n){var r;return r=-1!==n.indexOf("<head>")?n.replace("<head>","<".concat(X,">")).replace("</head>","</".concat(X,">")):"<".concat(X,"></").concat(X,">").concat(n),'<div id="'.concat(J(e),'" data-name="').concat(e,'" data-version="').concat(V,'" data-sandbox-cfg=').concat(JSON.stringify(t),">").concat(r,"</div>")}}function J(e){return"__qiankun_microapp_wrapper_for_".concat(g(e),"__")}var Z=new Function("return this")(),$=new Function("return document")(),ee=y((function(){return Z.hasOwnProperty("__app_instance_name_map__")||Object.defineProperty(Z,"__app_instance_name_map__",{enumerable:!1,configurable:!0,writable:!0,value:{}}),Z.__app_instance_name_map__})),te=function(e){var t=ee();return e in t?(t[e]++,"".concat(e,"_").concat(t[e])):(Z.__app_instance_name_map__[e]=0,e)};function ne(e){var t=null!=e?e:{},n=t.bootstrap,r=t.mount,o=t.unmount;return S(n)&&S(r)&&S(o)}var re=o((function e(){var t=this;a(this,e),this.promise=void 0,this.resolve=void 0,this.reject=void 0,this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}));function oe(e){return"object"===s(e)&&(!e.strictStyleIsolation&&!!e.experimentalStyleIsolation)}var ae=null;function ie(){return ae}function ce(){ae=null}var se=new WeakMap;function ue(e,t){if(U(t)&&!Y(t)&&!function(e){var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1;if(t)return!0;if(W.has(e))return W.get(e);var n=t;if(!n){var r=e.toString();n=/^function\b\s[A-Z].*/.test(r)||/^class\b/.test(r)}return W.set(e,n),n}(t)){var n=se.get(t);if(n)return n;var r=Function.prototype.bind.call(t,e);if(Object.getOwnPropertyNames(t).forEach((function(e){r.hasOwnProperty(e)||Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})),t.hasOwnProperty("prototype")&&!r.hasOwnProperty("prototype")&&Object.defineProperty(r,"prototype",{value:t.prototype,enumerable:!1,writable:!0}),"function"==typeof t.toString){var o=t.hasOwnProperty("toString")&&!r.hasOwnProperty("toString"),a=r.toString===Function.prototype.toString;if(o||a){var i=Object.getOwnPropertyDescriptor(o?t:Function.prototype,"toString");Object.defineProperty(r,"toString",Object.assign({},i,(null==i?void 0:i.get)?null:{value:function(){return t.toString()}}))}}return se.set(t,r),r}return t}var le,pe,de=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;a(this,e),this.addedPropsMapInSandbox=new Map,this.modifiedPropsOriginalValueMapInSandbox=new Map,this.currentUpdatedPropsValueMap=new Map,this.name=void 0,this.proxy=void 0,this.globalContext=void 0,this.type=void 0,this.sandboxRunning=!0,this.latestSetProp=null,this.name=t,this.globalContext=r,this.type=G.LegacyProxy;var o=this.addedPropsMapInSandbox,i=this.modifiedPropsOriginalValueMapInSandbox,c=this.currentUpdatedPropsValueMap,s=r,u=function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return!n.sandboxRunning||(s.hasOwnProperty(e)?i.has(e)||i.set(e,r):o.set(e,t),c.set(e,t),a&&(s[e]=t),n.latestSetProp=e,!0)},l=new Proxy(Object.create(null),{set:function(e,t,n){var r=s[t];return u(t,n,r,!0)},get:function(e,t){if("top"===t||"parent"===t||"window"===t||"self"===t)return l;var n=s[t];return ue(s,n)},
// trap in operator
// see https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/constants.js#L12
has:function(e,t){return t in s},getOwnPropertyDescriptor:function(e,t){var n=Object.getOwnPropertyDescriptor(s,t);return n&&!n.configurable&&(n.configurable=!0),n},defineProperty:function(e,t,n){var r=s[t],o=Reflect.defineProperty(s,t,n),a=s[t];return u(t,a,r,!1),o}});this.proxy=l}return o(e,[{key:"setWindowProp",value:function(e,t,n){void 0===t&&n?delete this.globalContext[e]:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||n.configurable}(this.globalContext,e)&&"symbol"!==s(e)&&(Object.defineProperty(this.globalContext,e,{writable:!0,configurable:!0}),this.globalContext[e]=t)}},{key:"active",value:function(){var e=this;this.sandboxRunning||this.currentUpdatedPropsValueMap.forEach((function(t,n){return e.setWindowProp(n,t)})),this.sandboxRunning=!0}},{key:"inactive",value:function(){var e=this;this.modifiedPropsOriginalValueMapInSandbox.forEach((function(t,n){return e.setWindowProp(n,t)})),this.addedPropsMapInSandbox.forEach((function(t,n){return e.setWindowProp(n,void 0,!0)})),this.sandboxRunning=!1}},{key:"patchDocument",value:function(){}}]),e}();(pe=le||(le={}))[pe.STYLE=1]="STYLE",pe[pe.MEDIA=4]="MEDIA",pe[pe.SUPPORTS=12]="SUPPORTS",pe[pe.IMPORT=3]="IMPORT",pe[pe.FONT_FACE=5]="FONT_FACE",pe[pe.PAGE=6]="PAGE",pe[pe.KEYFRAMES=7]="KEYFRAMES",pe[pe.KEYFRAME=8]="KEYFRAME";var fe,me=function(e){return[].slice.call(e,0)},ve=HTMLBodyElement.prototype.appendChild,he=function(){function e(){a(this,e),this.sheet=void 0,this.swapNode=void 0;var t=document.createElement("style");ve.call(document.body,t),this.swapNode=t,this.sheet=t.sheet,this.sheet.disabled=!0}return o(e,[{key:"process",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(e.ModifiedTag in t)){if(""!==t.textContent){var o,a=document.createTextNode(t.textContent||"");this.swapNode.appendChild(a);var i=this.swapNode.sheet,c=me(null!==(o=null==i?void 0:i.cssRules)&&void 0!==o?o:[]),s=this.rewrite(c,r);return t.textContent=s,this.swapNode.removeChild(a),void(t[e.ModifiedTag]=!0)}new MutationObserver((function(o){for(var a=0;a<o.length;a+=1){var i=o[a];if(e.ModifiedTag in t)return;if("childList"===i.type){var c,s=t.sheet,u=me(null!==(c=null==s?void 0:s.cssRules)&&void 0!==c?c:[]),l=n.rewrite(u,r);t.textContent=l,t[e.ModifiedTag]=!0}}})).observe(t,{childList:!0})}}},{key:"rewrite",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="";return e.forEach((function(e){switch(e.type){case le.STYLE:r+=t.ruleStyle(e,n);break;case le.MEDIA:r+=t.ruleMedia(e,n);break;case le.SUPPORTS:r+=t.ruleSupport(e,n);break;default:"string"==typeof e.cssText&&(r+="".concat(e.cssText))}})),r}
// handle case:
// .app-main {}
// html, body {}
// eslint-disable-next-line class-methods-use-this
},{key:"ruleStyle",value:function(e,t){var n=/((?:[^\w\-.#]|^)(body|html|:root))/gm,r=/(html[^\w{[]+)/gm,o=e.selectorText.trim(),a="";if("string"==typeof e.cssText&&(a=e.cssText),"html"===o||"body"===o||":root"===o)return a.replace(n,t);if(r.test(e.selectorText)){/(html[^\w{]+)(\+|~)/gm.test(e.selectorText)||(a=a.replace(r,""))}return a=a.replace(/^[\s\S]+{/,(function(e){return e.replace(/(^|,\n?)([^,]+)/g,(function(e,r,o){return n.test(e)?e.replace(n,(function(e){return e&&[",","("].includes(e[0])?"".concat(e[0]).concat(t):t})):"".concat(r).concat(t," ").concat(o.replace(/^ */,""))}))}))}
// handle case:
// @media screen and (max-width: 300px) {}
},{key:"ruleMedia",value:function(e,t){var n=this.rewrite(me(e.cssRules),t);return"@media ".concat(e.conditionText||e.media.mediaText," {").concat(n,"}")}
// handle case:
// @supports (display: grid) {}
},{key:"ruleSupport",value:function(e,t){var n=this.rewrite(me(e.cssRules),t);return"@supports ".concat(e.conditionText||e.cssText.split("{")[0]," {").concat(n,"}")}}]),e}();he.ModifiedTag="Symbol(style-modified-qiankun)";var ye="data-qiankun",ge=function(e,t,n){fe||(fe=new he),t.tagName;if(e){var r=(e.tagName||"").toLowerCase();if(r&&"STYLE"===t.tagName){var o="".concat(r,"[").concat(ye,'="').concat(n,'"]');fe.process(t,o)}}},Se=window.Proxy?["Array","ArrayBuffer","Boolean","constructor","DataView","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Error","escape","eval","EvalError","Float32Array","Float64Array","Function","hasOwnProperty","Infinity","Int16Array","Int32Array","Int8Array","isFinite","isNaN","isPrototypeOf","JSON","Map","Math","NaN","Number","Object","parseFloat","parseInt","Promise","propertyIsEnumerable","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","String","Symbol","SyntaxError","toLocaleString","toString","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","URIError","valueOf","WeakMap","WeakSet"].filter((function(e){
/* just keep the available properties in current window context */
return e in window})):[];function Ee(e){return e.reduce((function(e,t){return e[t]=!0,e}),
// Notes that babel will transpile spread operator to Object.assign({}, ...args), which will keep the prototype of Object in merged object,
// while this result used as Symbol.unscopables, it will make properties in Object.prototype always be escaped from proxy sandbox as unscopables check will look up prototype chain as well,
// such as hasOwnProperty, toString, valueOf, etc.
// so we should use Object.create(null) to create a pure object without prototype chain here.
Object.create(null))}var be=Ee(["AbortController","AbortSignal","addEventListener","alert","AnalyserNode","Animation","AnimationEffectReadOnly","AnimationEffectTiming","AnimationEffectTimingReadOnly","AnimationEvent","AnimationPlaybackEvent","AnimationTimeline","applicationCache","ApplicationCache","ApplicationCacheErrorEvent","atob","Attr","Audio","AudioBuffer","AudioBufferSourceNode","AudioContext","AudioDestinationNode","AudioListener","AudioNode","AudioParam","AudioProcessingEvent","AudioScheduledSourceNode","AudioWorkletGlobalScope","AudioWorkletNode","AudioWorkletProcessor","BarProp","BaseAudioContext","BatteryManager","BeforeUnloadEvent","BiquadFilterNode","Blob","BlobEvent","blur","BroadcastChannel","btoa","BudgetService","ByteLengthQueuingStrategy","Cache","caches","CacheStorage","cancelAnimationFrame","cancelIdleCallback","CanvasCaptureMediaStreamTrack","CanvasGradient","CanvasPattern","CanvasRenderingContext2D","ChannelMergerNode","ChannelSplitterNode","CharacterData","clearInterval","clearTimeout","clientInformation","ClipboardEvent","ClipboardItem","close","closed","CloseEvent","Comment","CompositionEvent","CompressionStream","confirm","console","ConstantSourceNode","ConvolverNode","CountQueuingStrategy","createImageBitmap","Credential","CredentialsContainer","crypto","Crypto","CryptoKey","CSS","CSSConditionRule","CSSFontFaceRule","CSSGroupingRule","CSSImportRule","CSSKeyframeRule","CSSKeyframesRule","CSSMatrixComponent","CSSMediaRule","CSSNamespaceRule","CSSPageRule","CSSPerspective","CSSRotate","CSSRule","CSSRuleList","CSSScale","CSSSkew","CSSSkewX","CSSSkewY","CSSStyleDeclaration","CSSStyleRule","CSSStyleSheet","CSSSupportsRule","CSSTransformValue","CSSTranslate","CustomElementRegistry","customElements","CustomEvent","DataTransfer","DataTransferItem","DataTransferItemList","DecompressionStream","defaultstatus","defaultStatus","DelayNode","DeviceMotionEvent","DeviceOrientationEvent","devicePixelRatio","dispatchEvent","document","Document","DocumentFragment","DocumentType","DOMError","DOMException","DOMImplementation","DOMMatrix","DOMMatrixReadOnly","DOMParser","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectList","DOMRectReadOnly","DOMStringList","DOMStringMap","DOMTokenList","DragEvent","DynamicsCompressorNode","Element","ErrorEvent","event","Event","EventSource","EventTarget","external","fetch","File","FileList","FileReader","find","focus","FocusEvent","FontFace","FontFaceSetLoadEvent","FormData","FormDataEvent","frameElement","frames","GainNode","Gamepad","GamepadButton","GamepadEvent","getComputedStyle","getSelection","HashChangeEvent","Headers","history","History","HTMLAllCollection","HTMLAnchorElement","HTMLAreaElement","HTMLAudioElement","HTMLBaseElement","HTMLBodyElement","HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLCollection","HTMLContentElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDirectoryElement","HTMLDivElement","HTMLDListElement","HTMLDocument","HTMLElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFontElement","HTMLFormControlsCollection","HTMLFormElement","HTMLFrameElement","HTMLFrameSetElement","HTMLHeadElement","HTMLHeadingElement","HTMLHRElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMarqueeElement","HTMLMediaElement","HTMLMenuElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLObjectElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOptionsCollection","HTMLOutputElement","HTMLParagraphElement","HTMLParamElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","HTMLSelectElement","HTMLShadowElement","HTMLSlotElement","HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTemplateElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","IDBCursor","IDBCursorWithValue","IDBDatabase","IDBFactory","IDBIndex","IDBKeyRange","IDBObjectStore","IDBOpenDBRequest","IDBRequest","IDBTransaction","IDBVersionChangeEvent","IdleDeadline","IIRFilterNode","Image","ImageBitmap","ImageBitmapRenderingContext","ImageCapture","ImageData","indexedDB","innerHeight","innerWidth","InputEvent","IntersectionObserver","IntersectionObserverEntry","Intl","isSecureContext","KeyboardEvent","KeyframeEffect","KeyframeEffectReadOnly","length","localStorage","location","Location","locationbar","matchMedia","MediaDeviceInfo","MediaDevices","MediaElementAudioSourceNode","MediaEncryptedEvent","MediaError","MediaKeyMessageEvent","MediaKeySession","MediaKeyStatusMap","MediaKeySystemAccess","MediaList","MediaMetadata","MediaQueryList","MediaQueryListEvent","MediaRecorder","MediaSettingsRange","MediaSource","MediaStream","MediaStreamAudioDestinationNode","MediaStreamAudioSourceNode","MediaStreamConstraints","MediaStreamEvent","MediaStreamTrack","MediaStreamTrackEvent","menubar","MessageChannel","MessageEvent","MessagePort","MIDIAccess","MIDIConnectionEvent","MIDIInput","MIDIInputMap","MIDIMessageEvent","MIDIOutput","MIDIOutputMap","MIDIPort","MimeType","MimeTypeArray","MouseEvent","moveBy","moveTo","MutationEvent","MutationObserver","MutationRecord","name","NamedNodeMap","NavigationPreloadManager","navigator","Navigator","NavigatorUAData","NetworkInformation","Node","NodeFilter","NodeIterator","NodeList","Notification","OfflineAudioCompletionEvent","OfflineAudioContext","offscreenBuffering","OffscreenCanvas","OffscreenCanvasRenderingContext2D","onabort","onafterprint","onanimationend","onanimationiteration","onanimationstart","onappinstalled","onauxclick","onbeforeinstallprompt","onbeforeprint","onbeforeunload","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","ongotpointercapture","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onpopstate","onprogress","onratechange","onrejectionhandled","onreset","onresize","onscroll","onsearch","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","ontransitionend","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel","open","openDatabase","opener","Option","origin","OscillatorNode","outerHeight","outerWidth","OverconstrainedError","PageTransitionEvent","pageXOffset","pageYOffset","PannerNode","parent","Path2D","PaymentAddress","PaymentRequest","PaymentRequestUpdateEvent","PaymentResponse","performance","Performance","PerformanceEntry","PerformanceLongTaskTiming","PerformanceMark","PerformanceMeasure","PerformanceNavigation","PerformanceNavigationTiming","PerformanceObserver","PerformanceObserverEntryList","PerformancePaintTiming","PerformanceResourceTiming","PerformanceTiming","PeriodicWave","Permissions","PermissionStatus","personalbar","PhotoCapabilities","Plugin","PluginArray","PointerEvent","PopStateEvent","postMessage","Presentation","PresentationAvailability","PresentationConnection","PresentationConnectionAvailableEvent","PresentationConnectionCloseEvent","PresentationConnectionList","PresentationReceiver","PresentationRequest","print","ProcessingInstruction","ProgressEvent","PromiseRejectionEvent","prompt","PushManager","PushSubscription","PushSubscriptionOptions","queueMicrotask","RadioNodeList","Range","ReadableByteStreamController","ReadableStream","ReadableStreamBYOBReader","ReadableStreamBYOBRequest","ReadableStreamDefaultController","ReadableStreamDefaultReader","registerProcessor","RemotePlayback","removeEventListener","reportError","Request","requestAnimationFrame","requestIdleCallback","resizeBy","ResizeObserver","ResizeObserverEntry","resizeTo","Response","RTCCertificate","RTCDataChannel","RTCDataChannelEvent","RTCDtlsTransport","RTCIceCandidate","RTCIceGatherer","RTCIceTransport","RTCPeerConnection","RTCPeerConnectionIceEvent","RTCRtpContributingSource","RTCRtpReceiver","RTCRtpSender","RTCSctpTransport","RTCSessionDescription","RTCStatsReport","RTCTrackEvent","screen","Screen","screenLeft","ScreenOrientation","screenTop","screenX","screenY","ScriptProcessorNode","scroll","scrollbars","scrollBy","scrollTo","scrollX","scrollY","SecurityPolicyViolationEvent","Selection","self","ServiceWorker","ServiceWorkerContainer","ServiceWorkerRegistration","sessionStorage","setInterval","setTimeout","ShadowRoot","SharedWorker","SourceBuffer","SourceBufferList","speechSynthesis","SpeechSynthesisEvent","SpeechSynthesisUtterance","StaticRange","status","statusbar","StereoPannerNode","stop","Storage","StorageEvent","StorageManager","structuredClone","styleMedia","StyleSheet","StyleSheetList","SubmitEvent","SubtleCrypto","SVGAElement","SVGAngle","SVGAnimatedAngle","SVGAnimatedBoolean","SVGAnimatedEnumeration","SVGAnimatedInteger","SVGAnimatedLength","SVGAnimatedLengthList","SVGAnimatedNumber","SVGAnimatedNumberList","SVGAnimatedPreserveAspectRatio","SVGAnimatedRect","SVGAnimatedString","SVGAnimatedTransformList","SVGAnimateElement","SVGAnimateMotionElement","SVGAnimateTransformElement","SVGAnimationElement","SVGCircleElement","SVGClipPathElement","SVGComponentTransferFunctionElement","SVGDefsElement","SVGDescElement","SVGDiscardElement","SVGElement","SVGEllipseElement","SVGFEBlendElement","SVGFEColorMatrixElement","SVGFEComponentTransferElement","SVGFECompositeElement","SVGFEConvolveMatrixElement","SVGFEDiffuseLightingElement","SVGFEDisplacementMapElement","SVGFEDistantLightElement","SVGFEDropShadowElement","SVGFEFloodElement","SVGFEFuncAElement","SVGFEFuncBElement","SVGFEFuncGElement","SVGFEFuncRElement","SVGFEGaussianBlurElement","SVGFEImageElement","SVGFEMergeElement","SVGFEMergeNodeElement","SVGFEMorphologyElement","SVGFEOffsetElement","SVGFEPointLightElement","SVGFESpecularLightingElement","SVGFESpotLightElement","SVGFETileElement","SVGFETurbulenceElement","SVGFilterElement","SVGForeignObjectElement","SVGGElement","SVGGeometryElement","SVGGradientElement","SVGGraphicsElement","SVGImageElement","SVGLength","SVGLengthList","SVGLinearGradientElement","SVGLineElement","SVGMarkerElement","SVGMaskElement","SVGMatrix","SVGMetadataElement","SVGMPathElement","SVGNumber","SVGNumberList","SVGPathElement","SVGPatternElement","SVGPoint","SVGPointList","SVGPolygonElement","SVGPolylineElement","SVGPreserveAspectRatio","SVGRadialGradientElement","SVGRect","SVGRectElement","SVGScriptElement","SVGSetElement","SVGStopElement","SVGStringList","SVGStyleElement","SVGSVGElement","SVGSwitchElement","SVGSymbolElement","SVGTextContentElement","SVGTextElement","SVGTextPathElement","SVGTextPositioningElement","SVGTitleElement","SVGTransform","SVGTransformList","SVGTSpanElement","SVGUnitTypes","SVGUseElement","SVGViewElement","TaskAttributionTiming","Text","TextDecoder","TextDecoderStream","TextEncoder","TextEncoderStream","TextEvent","TextMetrics","TextTrack","TextTrackCue","TextTrackCueList","TextTrackList","TimeRanges","ToggleEvent","toolbar","top","Touch","TouchEvent","TouchList","TrackEvent","TransformStream","TransformStreamDefaultController","TransitionEvent","TreeWalker","UIEvent","URL","URLSearchParams","ValidityState","visualViewport","VisualViewport","VTTCue","WaveShaperNode","WebAssembly","WebGL2RenderingContext","WebGLActiveInfo","WebGLBuffer","WebGLContextEvent","WebGLFramebuffer","WebGLProgram","WebGLQuery","WebGLRenderbuffer","WebGLRenderingContext","WebGLSampler","WebGLShader","WebGLShaderPrecisionFormat","WebGLSync","WebGLTexture","WebGLTransformFeedback","WebGLUniformLocation","WebGLVertexArrayObject","WebSocket","WheelEvent","window","Window","Worker","WritableStream","WritableStreamDefaultController","WritableStreamDefaultWriter","XMLDocument","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload","XMLSerializer","XPathEvaluator","XPathExpression","XPathResult","XSLTProcessor"].concat([]));var we=Object.defineProperty,Me=window.__QIANKUN_DEVELOPMENT__?[
// for react hot reload
// see https://github.com/facebook/create-react-app/blob/66bf7dfc43350249e2f09d138a20840dae8a0a4a/packages/react-error-overlay/src/index.js#L180
"__REACT_ERROR_OVERLAY_GLOBAL_HOOK__",
// for react development event issue, see https://github.com/umijs/qiankun/issues/2375
"event"]:[],Te=[
// FIXME System.js used a indirect call with eval, which would make it scope escape to global
// To make System.js works well, we write it back to global window temporary
// see https://github.com/systemjs/systemjs/blob/457f5b7e8af6bd120a279540477552a07d5de086/src/evaluate.js#L106
"System",
// see https://github.com/systemjs/systemjs/blob/457f5b7e8af6bd120a279540477552a07d5de086/src/instantiate.js#L357
"__cjsWrapper"].concat(Me),Pe=["document","top","parent","eval"],Ce=["window","self","globalThis","hasOwnProperty"].concat([]),xe=Array.from(new Set(E.apply(void 0,[Se.concat(Ce).concat("requestAnimationFrame")].concat(Pe)))),Le=Ee(xe),Oe=Ee(E.apply(void 0,[xe].concat(u(Pe.concat(Ce))))),Re=new Map([["fetch",!0],["mockDomAPIInBlackList",!1]]);var _e=0,Ge=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=arguments.length>2?arguments[2]:void 0;a(this,e),this.updatedValueSet=new Set,this.document=document,this.name=void 0,this.type=void 0,this.proxy=void 0,this.sandboxRunning=!0,this.latestSetProp=null,this.globalWhitelistPrevDescriptor={},this.globalContext=void 0,this.name=t,this.globalContext=r,this.type=G.Proxy;var i=this.updatedValueSet,c=(o||{}).speedy,u=function(e,t){var n=new Map,r={};return Object.getOwnPropertyNames(e).filter((function(t){var n=Object.getOwnPropertyDescriptor(e,t);return!(null==n?void 0:n.configurable)})).forEach((function(o){var a=Object.getOwnPropertyDescriptor(e,o);if(a){var i=Object.prototype.hasOwnProperty.call(a,"get");("top"===o||"parent"===o||"self"===o||"window"===o||// window.document is overwriting in speedy mode
"document"===o&&t)&&(a.configurable=!0,i||(a.writable=!0)),i&&n.set(o,!0),we(r,o,Object.freeze(a))}})),{fakeWindow:r,propertiesWithGetter:n}}(r,!!c),l=u.fakeWindow,p=u.propertiesWithGetter,d=new Map,f=new Proxy(l,{set:function(e,o,a){if(n.sandboxRunning){if(n.registerRunningApp(t,f),"string"==typeof o&&-1!==Te.indexOf(o))n.globalWhitelistPrevDescriptor[o]=Object.getOwnPropertyDescriptor(r,o),r[o]=a;else if(!e.hasOwnProperty(o)&&r.hasOwnProperty(o)){var c=Object.getOwnPropertyDescriptor(r,o),s=c.writable,u=c.configurable,l=c.enumerable,p=c.set;(s||p)&&Object.defineProperty(e,o,{configurable:u,enumerable:l,writable:!0,value:a})}else e[o]=a;return i.add(o),n.latestSetProp=o,!0}return!0},get:function(e,o){if(n.registerRunningApp(t,f),o===Symbol.unscopables)return Oe;if("window"===o||"self"===o)return f;if("globalThis"===o)return f;if("top"===o||"parent"===o)return r===r.parent?f:r[o];if("hasOwnProperty"===o)return m;if("document"===o)return n.document;if("eval"===o)return eval;if("string"===o&&-1!==Te.indexOf(o))return r[o];var a=p.has(o)?r:o in e?e:r,i=a[o];return function(e,t){if(!e||!t)return!1;var n=q.get(e)||{};if(n[t])return n[t];var r=Object.getOwnPropertyDescriptor(e,t),o=Boolean(r&&!1===r.configurable&&(!1===r.writable||r.get&&!r.set));return n[t]=o,q.set(e,n),o}(a,o)?i:o in be||Re.has(o)?ue(Re.get(o)?Z:r,i):i},
// trap in operator
// see https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/constants.js#L12
has:function(e,t){return t in Le||t in e||t in r},getOwnPropertyDescriptor:function(e,t){if(e.hasOwnProperty(t)){var n=Object.getOwnPropertyDescriptor(e,t);return d.set(t,"target"),n}if(r.hasOwnProperty(t)){var o=Object.getOwnPropertyDescriptor(r,t);return d.set(t,"globalContext"),o&&!o.configurable&&(o.configurable=!0),o}},
// trap to support iterator with sandbox
ownKeys:function(e){return Reflect.ownKeys(r).concat(Reflect.ownKeys(e)).filter((function(e){return!(e in this)&&(this[e]=!0)}),Object.create(null))},defineProperty:function(e,t,n){return"globalContext"===d.get(t)?Reflect.defineProperty(r,t,n):Reflect.defineProperty(e,t,n)},deleteProperty:function(e,r){return n.registerRunningApp(t,f),!e.hasOwnProperty(r)||(delete e[r],i.delete(r),!0)},
// makes sure `window instanceof Window` returns truthy in micro app
getPrototypeOf:function(){return Reflect.getPrototypeOf(r)}});function m(e){return this!==f&&null!==this&&"object"===s(this)?Object.prototype.hasOwnProperty.call(this,e):l.hasOwnProperty(e)||r.hasOwnProperty(e)}this.proxy=f,_e++}return o(e,[{key:"active",value:function(){this.sandboxRunning||_e++,this.sandboxRunning=!0}},{key:"inactive",value:function(){var e=this;0==--_e&&Object.keys(this.globalWhitelistPrevDescriptor).forEach((function(t){var n=e.globalWhitelistPrevDescriptor[t];n?Object.defineProperty(e.globalContext,t,n):delete e.globalContext[t]})),this.sandboxRunning=!1}},{key:"patchDocument",value:function(e){this.document=e}},{key:"registerRunningApp",value:function(e,t){if(this.sandboxRunning){var n=ie();n&&n.name===e||(ae={name:e,window:t}),r=ce,F||(F=!0,B((function(){r(),F=!1})))}var r}}]),e}(),Ae="SCRIPT",ke="LINK",De="STYLE",He=Symbol("target"),Ie=Symbol("refNodeNo"),Ve=Symbol("qiankun-overwritten"),Ne=function(e){return e.querySelector(X)};function Be(e){return(null==e?void 0:e.toUpperCase())===ke||(null==e?void 0:e.toUpperCase())===De||(null==e?void 0:e.toUpperCase())===Ae}function Fe(e){var t,n;return!e.textContent&&((null===(t=e.sheet)||void 0===t?void 0:t.cssRules.length)||(null===(n=$e(e))||void 0===n?void 0:n.length))}var We=new Map;function je(e,t,n){var r=We.get(e)||{bootstrappingPatchCount:0,mountingPatchCount:0};switch(t){case"increase":r["".concat(n,"PatchCount")]+=1;break;case"decrease":r["".concat(n,"PatchCount")]>0&&(r["".concat(n,"PatchCount")]-=1)}We.set(e,r)}function Ue(){return Array.from(We.entries()).every((function(e){var t=l(e,2)[1],n=t.bootstrappingPatchCount,r=t.mountingPatchCount;return 0===n&&0===r}))}function qe(e,t){return Object.defineProperties(e,{srcElement:{get:t},target:{get:t}}),e}function Ke(e){var t=qe(new CustomEvent("load"),(function(){return e}));S(e.onload)?e.onload(t):e.dispatchEvent(t)}function Ye(e){var t=qe(new CustomEvent("error"),(function(){return e}));S(e.onerror)?e.onerror(t):e.dispatchEvent(t)}var Qe=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})},Xe=new WeakMap,ze=new WeakMap,Je=new WeakMap;function Ze(e){e.forEach((function(e){e instanceof HTMLStyleElement&&Fe(e)&&e.sheet&&Xe.set(e,e.sheet.cssRules)}))}function $e(e){return Xe.get(e)}function et(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t,a=e.rawDOMAppendOrInsertBefore,i=e.isInvokedByMicroApp,c=e.containerConfigGetter,s=e.target,u=void 0===s?"body":s;if(!Be(o.tagName)||!i(o))return a.call(this,o,r);if(o.tagName){var l=c(o),p=l.appName,d=l.appWrapperGetter,f=l.proxy,m=l.strictGlobal,v=l.speedySandbox,h=l.dynamicStyleSheetElements,y=l.scopedCSS,g=l.excludeAssetFilter;switch(o.tagName){case ke:case De:var S=t,E=S.href;if(g&&E&&g(E))return a.call(this,o,r);Qe(S,He,u);var b,w=d();if(y)if((null===(b=o.tagName)||void 0===b?void 0:b.toUpperCase())===ke&&"stylesheet"===o.rel&&o.href){var M,T="function"==typeof Qt.fetch?Qt.fetch:null===(M=Qt.fetch)||void 0===M?void 0:M.fn;S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch,r=document.createElement("style"),o=e.href;return r.dataset.qiankunHref=o,n(o).then((function(e){return e.text()})).then((function(n){r.appendChild(document.createTextNode(n)),t(r),Ke(e)})).catch((function(){return Ye(e)})),r}(o,(function(e){return ge(w,e,p)}),T),Je.set(o,S)}else ge(w,S,p);var P,C="head"===u?Ne(w):w,x=C.contains(r)?r:null;x&&(P=Array.from(C.childNodes).indexOf(x));var O=a.call(C,S,x);return"number"==typeof P&&-1!==P&&Qe(S,Ie,P),h.push(S),O;case Ae:var R=o,_=R.src,G=R.text;if(g&&_&&g(_)||(n=o).type&&-1===["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"].indexOf(n.type))return a.call(this,o,r);var A=d(),k="head"===u?Ne(A):A,D=Qt.fetch,H=k.contains(r)?r:null,I=v?xe:[];if(_){var V=!1;L(null,[_],f,{fetch:D,strictGlobal:m,scopedGlobalVariables:I,beforeExec:function(){var e;(!(e=Object.getOwnPropertyDescriptor(document,"currentScript"))||e.configurable)&&(Object.defineProperty(document,"currentScript",{get:function(){return o},configurable:!0}),V=!0)},success:function(){Ke(o),V&&delete document.currentScript,o=null},error:function(){Ye(o),V&&delete document.currentScript,o=null}});var N=document.createComment("dynamic script ".concat(_," replaced by qiankun"));return ze.set(o,N),a.call(k,N,H)}L(null,["<script>".concat(G,"<\/script>")],f,{strictGlobal:m,scopedGlobalVariables:I});var B=document.createComment("dynamic inline script replaced by qiankun");return ze.set(o,B),a.call(k,B,H)}}return a.call(this,o,r)}return t[Ve]=!0,t}function tt(e,t,n,r){function o(o){var a=o.tagName;if(!Be(a)||!r(o))return e.call(this,o);try{var i,c=t(o),s=c.appWrapperGetter,u=c.dynamicStyleSheetElements;switch(a){case De:case ke:i=Je.get(o)||o;var l=u.indexOf(i);-1!==l&&u.splice(l,1);break;case Ae:i=ze.get(o)||o;break;default:i=o}var p=s();if(("head"===n?Ne(p):p).contains(i))return e.call(i.parentNode,i)}catch(d){}return e.call(this,o)}return o[Ve]=!0,o}function nt(e,t){var n=HTMLHeadElement.prototype.appendChild,r=HTMLBodyElement.prototype.appendChild,o=HTMLHeadElement.prototype.insertBefore;!0!==n[Ve]&&!0!==r[Ve]&&!0!==o[Ve]&&(HTMLHeadElement.prototype.appendChild=et({rawDOMAppendOrInsertBefore:n,containerConfigGetter:t,isInvokedByMicroApp:e,target:"head"}),HTMLBodyElement.prototype.appendChild=et({rawDOMAppendOrInsertBefore:r,containerConfigGetter:t,isInvokedByMicroApp:e,target:"body"}),HTMLHeadElement.prototype.insertBefore=et({rawDOMAppendOrInsertBefore:o,containerConfigGetter:t,isInvokedByMicroApp:e,target:"head"}));var a=HTMLHeadElement.prototype.removeChild,i=HTMLBodyElement.prototype.removeChild;return!0!==a[Ve]&&!0!==i[Ve]&&(HTMLHeadElement.prototype.removeChild=tt(a,t,"head",e),HTMLBodyElement.prototype.removeChild=tt(i,t,"body",e)),function(){HTMLHeadElement.prototype.appendChild=n,HTMLHeadElement.prototype.removeChild=a,HTMLBodyElement.prototype.appendChild=r,HTMLBodyElement.prototype.removeChild=i,HTMLHeadElement.prototype.insertBefore=o}}function rt(e,t){e.forEach((function(e){if(t(e)&&e instanceof HTMLStyleElement&&Fe(e)){var n=$e(e);if(n)for(var r=0;r<n.length;r++){var o=n[r],a=e.sheet;a.insertRule(o.cssText,a.cssRules.length)}}}))}function ot(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,i=n.proxy,c=[],s=nt((
/*
      check if the currently specified application is active
      While we switch page from qiankun app to a normal react routing page, the normal one may load stylesheet dynamically while page rendering,
      but the url change listener must wait until the current call stack is flushed.
      This scenario may cause we record the stylesheet from react routing page dynamic injection,
      and remove them after the url change triggered and qiankun app is unmounting
      see https://github.com/ReactTraining/history/blob/master/modules/createHashHistory.js#L222-L230
     */
function(){return M(window.location).some((function(t){return t===e}))}),(function(){return{appName:e,appWrapperGetter:t,proxy:i,strictGlobal:!1,speedySandbox:!1,scopedCSS:o,dynamicStyleSheetElements:c,excludeAssetFilter:a}}));return r||je(e,"increase","bootstrapping"),r&&je(e,"increase","mounting"),function(){return r||je(e,"decrease","bootstrapping"),r&&je(e,"decrease","mounting"),Ue()&&s(),Ze(c),function(){rt(c,(function(e){var n=t();return!n.contains(e)&&(document.head.appendChild.call(n,e),!0)})),r&&(c=[])}}}Object.defineProperty(Z,"__proxyAttachContainerConfigMap__",{enumerable:!1,writable:!0}),Object.defineProperty(Z,"__currentLockingSandbox__",{enumerable:!1,writable:!0,configurable:!0});var at=HTMLHeadElement.prototype.appendChild,it=HTMLHeadElement.prototype.insertBefore;Z.__proxyAttachContainerConfigMap__=Z.__proxyAttachContainerConfigMap__||new WeakMap;var ct=Z.__proxyAttachContainerConfigMap__,st=new WeakMap,ut=new WeakMap,lt=new WeakMap;function pt(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=n.proxy,s=ct.get(c);s||(s={appName:e,proxy:c,appWrapperGetter:t,dynamicStyleSheetElements:[],strictGlobal:!0,speedySandbox:i,excludeAssetFilter:a,scopedCSS:o},ct.set(c,s));var l=s.dynamicStyleSheetElements,d=nt((function(e){return st.has(e)}),(function(e){return st.get(e)})),f=function(e){var t=e.sandbox,n=e.speedy,r=function(e,t){var n=ct.get(t);n&&st.set(e,n)};if(n){var o={},a=new Proxy(document,{
/**
       * Read and write must be paired, otherwise the write operation will leak to the global
       */
set:function(e,t,n){switch(t){case"createElement":o.createElement=n;break;case"querySelector":o.querySelector=n;break;default:e[t]=n}return!0},get:function(e,n,a){switch(n){case"createElement":var i=o.createElement||e.createElement;return function(){Z.__currentLockingSandbox__||(Z.__currentLockingSandbox__=t.name);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var c=i.call.apply(i,[e].concat(o));return Z.__currentLockingSandbox__===t.name&&(r(c,t.proxy),delete Z.__currentLockingSandbox__),c};case"querySelector":var c=o.querySelector||e.querySelector;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if("head"===r[0]){var a=ct.get(t.proxy);if(a){var i=Ne(a.appWrapperGetter());return i.appendChild=HTMLHeadElement.prototype.appendChild,i.insertBefore=HTMLHeadElement.prototype.insertBefore,i.removeChild=HTMLHeadElement.prototype.removeChild,i}}return c.call.apply(c,[e].concat(r))}}var s=e[n];return U(s)&&!Y(s)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return s.call.apply(s,[e].concat(u(n.map((function(t){return t===a?e:t})))))}:s}});t.patchDocument(a);var i=MutationObserver.prototype.observe;if(!lt.has(i)){var c=function(e,t){var n=e instanceof Document?$:e;return i.call(this,n,t)};MutationObserver.prototype.observe=c,lt.set(i,c)}var s=Node.prototype.compareDocumentPosition;lt.has(s)||(Node.prototype.compareDocumentPosition=function(e){var t=e instanceof Document?$:e;return s.call(this,t)},lt.set(s,Node.prototype.compareDocumentPosition));var l=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode");if(l&&!lt.has(l)){var d=l.get,f=l.configurable;if(d&&f){var m=p(p({},l),{},{get:function(){var e=d.call(this);if(e instanceof Document){var t,n=null===(t=ie())||void 0===t?void 0:t.window;if(n)return n.document}return e}});Object.defineProperty(Node.prototype,"parentNode",m),lt.set(l,m)}}return function(){MutationObserver.prototype.observe=i,lt.delete(i),Node.prototype.compareDocumentPosition=s,lt.delete(s),l&&(Object.defineProperty(Node.prototype,"parentNode",l),lt.delete(l))}}var v=ut.get(document.createElement);if(!v){var h=document.createElement;Document.prototype.createElement=function(e,t){var n=h.call(this,e,t);if(Be(e)){var o=(ie()||{}).window;o&&r(n,o)}return n},document.hasOwnProperty("createElement")&&(document.createElement=Document.prototype.createElement),ut.set(Document.prototype.createElement,h)}return function(){v&&(Document.prototype.createElement=v,document.createElement=v)}}({sandbox:n,speedy:i});return r||je(e,"increase","bootstrapping"),r&&je(e,"increase","mounting"),function(){return r||je(e,"decrease","bootstrapping"),r&&je(e,"decrease","mounting"),Ue()&&(d(),f()),Ze(l),function(){rt(l,(function(e){var n=t();if(!n.contains(e)){var r="head"===e[He]?Ne(n):n,o=e[Ie];if("number"==typeof o&&-1!==o){var a=r.childNodes[o]||null;return it.call(r,e,a),!0}return at.call(r,e),!0}return!1}))}}}var dt=window.setInterval,ft=window.clearInterval;var mt=window.addEventListener,vt=window.removeEventListener;function ht(e,t,n,r,o,a){var i,s=[function(){return e=n.proxy,t=[],e.clearInterval=function(e){return t=t.filter((function(t){return t!==e})),ft.call(window,e)},e.setInterval=function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var i=dt.apply(void 0,[e,n].concat(o));return t=[].concat(u(t),[i]),i},function(){return t.forEach((function(t){return e.clearInterval(t)})),e.setInterval=dt,e.clearInterval=ft,b};var e,t},function(){return e=n.proxy,t=new Map,e.addEventListener=function(e,n,r){var o=t.get(e)||[];return t.set(e,[].concat(u(o),[n])),mt.call(window,e,n,r)},e.removeEventListener=function(e,n,r){var o=t.get(e);return o&&o.length&&-1!==o.indexOf(n)&&o.splice(o.indexOf(n),1),vt.call(window,e,n,r)},function(){return t.forEach((function(t,n){return u(t).forEach((function(t){return e.removeEventListener(n,t)}))})),e.addEventListener=mt,e.removeEventListener=vt,b};var e,t},function(){return e=function(e){return b},t=[],n=[],window.g_history&&S(window.g_history.listen)&&(e=window.g_history.listen.bind(window.g_history),window.g_history.listen=function(r){t.push(r);var o=e(r);return n.push(o),function(){o(),n.splice(n.indexOf(o),1),t.splice(t.indexOf(r),1)}}),function(){var r=b;return t.length&&(r=function(){t.forEach((function(e){return window.g_history.listen(e)}))}),n.forEach((function(e){return e()})),window.g_history&&S(window.g_history.listen)&&(window.g_history.listen=e),r};var e,t,n}];return null===(i=c(c(c({},G.LegacyProxy,[].concat(s,[function(){return ot(e,t,n,!0,r,o)}])),G.Proxy,[].concat(s,[function(){return pt(e,t,n,!0,r,o,a)}])),G.Snapshot,[].concat(s,[function(){return ot(e,t,n,!0,r,o)}]))[n.type])||void 0===i?void 0:i.map((function(e){return e()}))}function yt(e,t){for(var n in e)(e.hasOwnProperty(n)||"clearInterval"===n)&&t(n)}var gt=function(){function e(t){a(this,e),this.proxy=void 0,this.name=void 0,this.type=void 0,this.sandboxRunning=!0,this.windowSnapshot=void 0,this.modifyPropsMap={},this.name=t,this.proxy=window,this.type=G.Snapshot}return o(e,[{key:"active",value:function(){var e=this;this.windowSnapshot={},yt(window,(function(t){e.windowSnapshot[t]=window[t]})),Object.keys(this.modifyPropsMap).forEach((function(t){window[t]=e.modifyPropsMap[t]})),this.sandboxRunning=!0}},{key:"inactive",value:function(){var e=this;this.modifyPropsMap={},yt(window,(function(t){window[t]!==e.windowSnapshot[t]&&(e.modifyPropsMap[t]=window[t],window[t]=e.windowSnapshot[t])})),this.sandboxRunning=!1}},{key:"patchDocument",value:function(){}}]),e}();function St(n,r,o,a,i,s,l){var p;p=window.Proxy?a?new de(n,s):new Ge(n,s,{speedy:!!l}):new gt(n);var d=function(e,t,n,r,o,a){var i;return null===(i=c(c(c({},G.LegacyProxy,[function(){return ot(e,t,n,!1,r,o)}]),G.Proxy,[function(){return pt(e,t,n,!1,r,o,a)}]),G.Snapshot,[function(){return ot(e,t,n,!1,r,o)}])[n.type])||void 0===i?void 0:i.map((function(e){return e()}))}(n,r,p,o,i,l),f=[],m=[];return{instance:p,
/**
     * 沙箱被 mount
     * 可能是从 bootstrap 状态进入的 mount
     * 也可能是从 unmount 之后再次唤醒进入 mount
     */
mount:function(){return e(t.mark((function e(){var a,c;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.active(),a=m.slice(0,d.length),c=m.slice(d.length),a.length&&a.forEach((function(e){return e()})),f=ht(n,r,p,o,i,l),c.length&&c.forEach((function(e){return e()})),m=[];case 7:case"end":return e.stop()}}),e)})))()},
/**
     * 恢复 global 状态，使其能回到应用加载之前的状态
     */
unmount:function(){return e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m=[].concat(u(d),u(f)).map((function(e){return e()})),p.inactive();case 2:case"end":return e.stop()}}),e)})))()}}}var Et=["singular","sandbox","excludeAssetFilter","globalContext"];function bt(e,t){if(!e){if(t)throw new k(t);throw new k("element not existed!")}}function wt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return e.length?e.reduce((function(e,r){return e.then((function(){return r(t,n)}))}),Promise.resolve()):Promise.resolve()}function Mt(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=e(t.mark((function e(n,r){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","function"==typeof n?n(r):!!n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pt=!!document.head.attachShadow||!!document.head.createShadowRoot;function Ct(e,t,n,r){var o=document.createElement("div");o.innerHTML=e;var a=o.firstChild;if(t)if(Pt){var i=a.innerHTML;a.innerHTML="",(a.attachShadow?a.attachShadow({mode:"open"}):a.createShadowRoot()).innerHTML=i}else;if(n){a.getAttribute(ye)||a.setAttribute(ye,r);var c=a.querySelectorAll("style")||[];w(c,(function(e){ge(a,e,r)}))}return a}function xt(e,t,n,r,o){return function(){if(t){if(n)throw new k("strictStyleIsolation can not be used with legacy render!");if(r)throw new k("experimentalStyleIsolation can not be used with legacy render!");var a=document.getElementById(J(e));return bt(a,"Wrapper element for ".concat(e," is not existed!")),a}var i=o();return bt(i,"Wrapper element for ".concat(e," is not existed!")),n&&Pt?i.shadowRoot:i}}var Lt,Ot,Rt=HTMLElement.prototype.appendChild,_t=HTMLElement.prototype.removeChild;function Gt(e,t,n){return function(r,o){var a=r.element,i=r.loading,c=r.container;if(n)return n({loading:i,appContent:a?t:""});var s=function(e){return"string"==typeof e?document.querySelector(e):e}(c);"unmounted"!==o&&bt(s,function(){switch(o){case"loading":case"mounting":return"Target container with ".concat(c," not existed while ").concat(e," ").concat(o,"!");case"mounted":return"Target container with ".concat(c," not existed after ").concat(e," ").concat(o,"!");default:return"Target container with ".concat(c," not existed while ").concat(e," rendering!")}}());if(s&&!s.contains(a)){for(;s.firstChild;)_t.call(s,s.firstChild);a&&Rt.call(s,a)}}}function At(e,t,n,r){if(ne(e))return e;if(r){var o=n[r];if(ne(o))return o}var a=n[t];if(ne(a))return a;throw new k("You need to export lifecycle functions in ".concat(t," entry"))}function kt(e){return Dt.apply(this,arguments)}function Dt(){return Dt=e(t.mark((function n(r){var o,a,i,c,u,l,v,h,y,g,S,E,b,w,M,T,P,C,x,L,R,G,A,k,D,H,V,B,F,W,j,U,q,K,Y,Q,X,J,Z,$,ee,ne,ae,ie,ce,se,ue,le,pe,de,fe,me,ve,he,ye,ge,Se,Ee=arguments;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Ee.length>1&&void 0!==Ee[1]?Ee[1]:{},c=Ee.length>2?Ee[2]:void 0,u=r.entry,l=r.name,v=te(l),h=i.singular,y=void 0!==h&&h,g=i.sandbox,S=void 0===g||g,E=i.excludeAssetFilter,b=i.globalContext,w=void 0===b?window:b,M=d(i,Et),n.next=9,O(u,M);case 9:return T=n.sent,P=T.template,C=T.execScripts,x=T.assetPublicPath,L=T.getExternalScripts,n.next=16,L();case 16:return n.next=18,Mt(y,r);case 18:if(!n.sent){n.next=21;break}return n.next=21,Lt&&Lt.promise;case 21:return R=z(v,S)(P),G="object"===s(S)&&!!S.strictStyleIsolation,A=oe(S),k=Ct(R,G,A,v),D="container"in r?r.container:void 0,H="render"in r?r.render:void 0,(V=Gt(v,R,H))({element:k,loading:!0,container:D},"loading"),B=xt(v,!!H,G,A,(function(){return k})),F=w,W=function(){return Promise.resolve()},j=function(){return Promise.resolve()},U="object"===s(S)&&!!S.loose,q="object"!==s(S)||!1!==S.speedy,S&&(K=St(v,
// FIXME should use a strict sandbox logic while remount, see https://github.com/umijs/qiankun/issues/518
B,A,U,E,F,q),F=K.instance.proxy,W=K.mount,j=K.unmount),Y=f({},_(F,x),c,(function(e,t){return m(null!=e?e:[],null!=t?t:[])})),Q=Y.beforeUnmount,X=void 0===Q?[]:Q,J=Y.afterUnmount,Z=void 0===J?[]:J,$=Y.afterMount,ee=void 0===$?[]:$,ne=Y.beforeMount,ae=void 0===ne?[]:ne,ie=Y.beforeLoad,ce=void 0===ie?[]:ie,n.next=40,wt(N(ce),r,F);case 40:return n.next=42,C(F,S&&!U,{scopedGlobalVariables:q?xe:[]});case 42:return se=n.sent,ue=At(se,l,F,null===(o=K)||void 0===o||null===(a=o.instance)||void 0===a?void 0:a.latestSetProp),le=ue.bootstrap,pe=ue.mount,de=ue.unmount,fe=ue.update,me=I(v),ve=me.onGlobalStateChange,he=me.setGlobalState,ye=me.offGlobalStateChange,ge=function(e){return k=e},Se=function(){var n,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,i={name:v,bootstrap:le,mount:[
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)}))),
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(y,r);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=Lt;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",Lt.promise);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e)}))),
// initial wrapper element before app mount/remount
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=k,o=xt(v,!!H,G,A,(function(){return n}));case 2:case"end":return e.stop()}}),e)}))),
// 添加 mount hook, 确保每次应用加载前容器 dom 结构已经设置完毕
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!(a!==D)&&n||(n=Ct(R,G,A,v),ge(n)),V({element:n,loading:!0,container:a},"mounting");case 3:case"end":return e.stop()}}),e)}))),W,
// exec the chain after rendering to keep the behavior with beforeLoad
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt(N(ae),r,F));case 1:case"end":return e.stop()}}),e)}))),
function(){var n=e(t.mark((function e(n){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe(p(p({},n),{},{container:o(),setGlobalState:he,onGlobalStateChange:ve})));case 1:case"end":return e.stop()}}),e)})));return function(e){return n.apply(this,arguments)}}(),
// finish loading after app mounted
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V({element:n,loading:!1,container:a},"mounted"));case 1:case"end":return e.stop()}}),e)}))),
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt(N(ee),r,F));case 1:case"end":return e.stop()}}),e)}))),
// initialize the unmount defer after app mounted and resolve the defer after it unmounted
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(y,r);case 2:if(!e.sent){e.next=4;break}Lt=new re;case 4:case"end":return e.stop()}}),e)}))),
e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))],unmount:[e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt(N(X),r,F));case 1:case"end":return e.stop()}}),e)}))),function(){var n=e(t.mark((function e(n){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de(p(p({},n),{},{container:o()})));case 1:case"end":return e.stop()}}),e)})));return function(e){return n.apply(this,arguments)}}(),j,e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt(N(Z),r,F));case 1:case"end":return e.stop()}}),e)}))),e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V({element:null,loading:!1,container:a},"unmounted"),ye(v),ge(n=null);case 4:case"end":return e.stop()}}),e)}))),e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(y,r);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=Lt;case 5:if(!e.t0){e.next=7;break}Lt.resolve();case 7:case"end":return e.stop()}}),e)})))]};return"function"==typeof fe&&(i.update=fe),i},n.abrupt("return",Se);case 48:case"end":return n.stop()}}),n)}))),Dt.apply(this,arguments)}function Ht(e,t){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}if(void 0!==window.requestIdleCallback)Ot=window.requestIdleCallback;else if(void 0!==window.MessageChannel){var It=new MessageChannel,Vt=It.port2,Nt=[];It.port1.onmessage=function(e){var t=e.data,n=Nt.shift();n&&Ht(n,t.start)},Ot=function(e){Nt.push(e),Vt.postMessage({start:Date.now()})}}else Ot=function(e){return setTimeout(Ht,0,e,Date.now())};var Bt=!!navigator.connection&&(navigator.connection.saveData||"wifi"!==navigator.connection.type&&"ethernet"!==navigator.connection.type&&/([23])g/.test(navigator.connection.effectiveType));function Ft(n,r){navigator.onLine&&!Bt&&Ot(e(t.mark((function e(){var o,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n,r);case 2:o=e.sent,a=o.getExternalScripts,i=o.getExternalStyleSheets,Ot(i),Ot(a);case 7:case"end":return e.stop()}}),e)}))))}function Wt(e,t){window.addEventListener("single-spa:first-mount",(function n(){e.filter((function(e){return T(e.name)===P})).forEach((function(e){return Ft(e.entry,t)})),window.removeEventListener("single-spa:first-mount",n)}))}function jt(e,t){e.forEach((function(e){return Ft(e.entry,t)}))}var Ut=["name","activeRule","loader","props"],qt=["mount"],Kt=["prefetch","urlRerouteOnly"],Yt=[],Qt={},Xt=new re;function zt(n,r){var o=n.filter((function(e){return!Yt.some((function(t){return t.name===e.name}))}));Yt=[].concat(u(Yt),u(o)),o.forEach((function(n){var o,a=n.name,i=n.activeRule,c=n.loader,s=void 0===c?b:c,l=n.props,f=d(n,Ut);C({name:a,app:(o=e(t.mark((function n(){var o,i,c;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0),n.next=3,Xt.promise;case 3:return n.next=5,kt(p({name:a,props:l},f),Qt,r);case 5:return n.t0=n.sent,o=(0,n.t0)(),i=o.mount,c=d(o,qt),n.abrupt("return",p({mount:[e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(!0));case 1:case"end":return e.stop()}}),e)})))].concat(u(N(i)),[e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(!1));case 1:case"end":return e.stop()}}),e)})))])},c));case 10:case"end":return n.stop()}}),n)}))),function(){return o.apply(this,arguments)}),activeWhen:i,customProps:l})}))}function Jt(){var n=Qt=p({prefetch:!0,singular:!0,sandbox:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),r=n.prefetch,o=n.urlRerouteOnly,a=void 0===o||o,i=d(n,Kt);r&&function(n,r,o){var a=function(e){return n.filter((function(t){return e.includes(t.name)}))};if(Array.isArray(r))Wt(a(r),o);else if(S(r))e(t.mark((function e(){var i,c,s,u,l;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:i=e.sent,c=i.criticalAppNames,s=void 0===c?[]:c,u=i.minorAppsName,l=void 0===u?[]:u,jt(a(s),o),Wt(a(l),o);case 9:case"end":return e.stop()}}),e)})))();else switch(r){case!0:Wt(n,o);break;case"all":jt(n,o)}}(Yt,r,i),Qt=function(e){var t=e.sandbox,n=void 0===t||t;if(e.singular,n){if(!window.Proxy)return p(p({},e),{},{sandbox:"object"===s(n)?p(p({},n),{},{loose:!0}):{loose:!0}});if(!Q()&&(!0===n||"object"===s(n)&&!1!==n.speedy))return p(p({},e),{},{sandbox:"object"===s(n)?p(p({},n),{},{speedy:!1}):{speedy:!1}})}return e}(Qt),x({urlRerouteOnly:a}),Xt.resolve()}export{zt as r,Jt as s};
